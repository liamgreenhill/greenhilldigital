<!doctype html>
<html lang="en-GB">
<head>
<meta charset="utf-8">
<meta http-equiv="x-ua-compatible" content="ie=edge">
<meta name="viewport" content="width=device-width, initial-scale=1">
<meta name="author" content="Greenhill FLD Limited">

<meta name="robots" content="index, follow">

<title>This website is a Progressive Web App | Greenhill</title>
<meta name="description" content="&lt;p&gt;We’ve supercharged our website. It’s secure, it’s fast, it works offline, and that’s just the beginning.&lt;/p&gt;">

<meta property="og:site_name" content="Greenhill Journal" />
<meta property="og:url" content="https://www.greenhilldigital.com/journal/this-website-is-a-progressive-web-app" />
<meta property="og:title" content="Today is the day: Greenhill is a PWA" />
<meta property="og:description" content="We’ve supercharged our website. It’s secure, it’s fast, it works offline, and that’s just the beginning." /><meta property="og:type" content="article" />
<meta property="article:author" content="" />

<meta name="twitter:card" content="summary_large_image" />
<meta name="twitter:site" content="" />
<meta name="twitter:title" content="Today is the day: Greenhill is a PWA" />
<meta name="twitter:description" content="We’ve supercharged our website. It’s secure, it’s fast, it works offline, and that’s just the beginning." /><meta name="twitter:url" content="https://www.greenhilldigital.com/journal/this-website-is-a-progressive-web-app" /><link href="/console/addons/apps/perch_blog/endpoint/?pid=22" rel="webmention">
<link rel='canonical' href="https://www.greenhilldigital.com/journal/this-website-is-a-progressive-web-app">

<link href="https://www.greenhilldigital.com/journal/rss" rel="alternate" type="application/rss+xml" title="Greenhill Journal RSS feed">
<link href="https://www.greenhilldigital.com/journal/jsonfeed.json" rel="alternate" type="application/json" title="Greenhill Journal JSON feed">

<!-- <link rel="manifest" href="site.webmanifest"> -->
<link rel="manifest" href="/manifest.json">

<!-- PWA Splash images for iOS -->
<meta name="apple-mobile-web-app-capable" content="yes">
<link rel="apple-touch-startup-image" href="/img/splash/launch-640x1136.png" media="(device-width: 320px) and (device-height: 568px) and (-webkit-device-pixel-ratio: 2) and (orientation: portrait)">
<link rel="apple-touch-startup-image" href="/img/splash/launch-750x1294.png" media="(device-width: 375px) and (device-height: 667px) and (-webkit-device-pixel-ratio: 2) and (orientation: portrait)">
<link rel="apple-touch-startup-image" href="/img/splash/launch-1242x2148.png" media="(device-width: 414px) and (device-height: 736px) and (-webkit-device-pixel-ratio: 3) and (orientation: portrait)">
<link rel="apple-touch-startup-image" href="/img/splash/launch-1125x2436.png" media="(device-width: 375px) and (device-height: 812px) and (-webkit-device-pixel-ratio: 3) and (orientation: portrait)">
<link rel="apple-touch-startup-image" href="/img/splash/launch-1536x2048.png" media="(min-device-width: 768px) and (max-device-width: 1024px) and (-webkit-min-device-pixel-ratio: 2) and (orientation: portrait)">
<link rel="apple-touch-startup-image" href="/img/splash/launch-1668x2224.png" media="(min-device-width: 834px) and (max-device-width: 834px) and (-webkit-min-device-pixel-ratio: 2) and (orientation: portrait)">
<link rel="apple-touch-startup-image" href="/img/splash/launch-2048x2732.png" media="(min-device-width: 1024px) and (max-device-width: 1024px) and (-webkit-min-device-pixel-ratio: 2) and (orientation: portrait)">

<link rel="apple-touch-icon" href="/icons/apple-touch-icon.png">
<!-- Place favicon.ico in the root directory -->

<link href="https://fonts.googleapis.com/css?family=PT+Serif:400,400i,700,700i&amp;subset=latin-ext" rel="stylesheet">


<script type="text/javascript">
    var MTUserId='1b677d22-39fd-44f6-8625-1806c06a6550';
    var MTFontIds = new Array();

    MTFontIds.push("1475508"); // Avenir® W01 45 Book
    MTFontIds.push("1475514"); // Avenir® W01 45 Book Oblique
    MTFontIds.push("1475532"); // Avenir® W01 65 Medium
    MTFontIds.push("1475538"); // Avenir® W01 65 Medium Oblique
    MTFontIds.push("1475556"); // Avenir® W01 95 Black
    MTFontIds.push("1475562"); // Avenir® W01 95 Black Oblique
    (function() {
        var mtTracking = document.createElement('script');
        mtTracking.type='text/javascript';
        mtTracking.async='true';
        mtTracking.src='/js/mtiFontTrackingCode.js';

        (document.getElementsByTagName('head')[0]||document.getElementsByTagName('body')[0]).appendChild(mtTracking);
    })();
</script>

<link rel="serviceworker" href="/serviceworker.js">

<link rel="stylesheet" href="/css/screen_v5.css">

<meta name="theme-color" content="#ffffff">

<!-- Global site tag (gtag.js) - Google Analytics -->
<script async src="https://www.googletagmanager.com/gtag/js?id=UA-17084064-1"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'UA-17084064-1');
</script>

</head>
<body class="section-journal">
<!--[if lte IE 9]>
<p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
<![endif]-->

<header role="banner">

    <div id="header-global">

        <div id="logo">
        <a href="https://www.greenhilldigital.com" title="Home"><span>Greenhill</span></a>
        </div>

        <ul id="header-contact-methods">
        <li><a id="header-tel" href="tel:+441413327051">Call +44 (0)141 332 7051</a></li>
        <li><a id="header-contact-us" href="mailto:info@greenhilldigital.com">Message us</a></li>
        <li><a id="header-visit-us" href="https://goo.gl/maps/beb15WjNWJP2">Visit us</a></li>
        </ul>

        <nav aria-label="site">
        <ul id="global-navigation">
        <li id="nav-services"><a href="/services/" title="What we do">Services</a></li>
        <li id="nav-portfolio"><a href="/portfolio/" title="A selection of our work">Portfolio</a></li>
        <li id="nav-about"><a href="/about/" title="Find out more about us">About</a></li>
        <li id="nav-journal" class="active"><a href="/journal/" title="Our latest opinion, thoughts and discoveries">Journal</a></li>
        <li id="nav-contact"><a href="/contact/" title="Contact us">Contact</a></li>
        </ul>
        </nav>

    </div>

    
</header>

<main id="journal-entry-main">

<!-- <button id="notifications">Send dummy notifications</button> -->

<article class="h-entry">

    
        <!-- <a href="archive.php?cat=news" class="p-category"> -->
            
        <!-- </a> -->
    

    <!-- <a href="/journal/this-website-is-a-progressive-web-app" rel="bookmark">bookmark icon</a> -->
    <h1 class="p-name">This website is a Progressive Web App</h1>
    <p class="byline">
        <span class="author-and-date">by <span class="p-author h-card">Laurence Hughes</span> <time class="dt-published" datetime="2018-09-15 10:29:00">15 September 2018</time></span> 
    </p>
    
    <p class="standfirst">We’ve supercharged our website. It’s secure, it’s fast, it works offline. And this is just the beginning.</p>

    
    <div class="article-body description e-content">
        <p>We’ve been interested in technologies for making websites work <em>offline</em> for some time now. And we’ve managed to use them - most notably <a href="https://alistapart.com/article/application-cache-is-a-douchebag">the infamous ApplicationCache</a> – on a number of projects over the last five or so years. However although their promise was great, the technology wasn’t really up to the task, so development was tough-going and involved a lot of compromises and workarounds.</p>

<h2>Enter Service Workers</h2>
<p>A service worker is a script which can access the lower-level workings of the browser. It can, for example, decide how to handle HTTP requests. It also has access to the <em>Cache API</em>. These two capabilities in combination allow us to develop a <em>cacheing strategy</em>.</p>

<p>The net result is that <strong>our website is available even when visitors are offline</strong>. And when they’re <em>online</em>, the site is faster than ever... in fact it’s <a href="https://www.youtube.com/watch?v=N0GdQyIm7DU">greasy fast</a>.</p>

<h3>Our cacheing strategy</h3>
<p>Our service worker is configured as follows:</p>
<ul>
<li>Before doing anything else, cache a small number of key files including the main CSS and javascript files. Also cache an <em>offline fallback</em> HTML page so it can be displayed when there is no internet connection.</li>
<li>When a <em>page</em> is requested (i.e. when the user tries to view a page):
	<ul>
	<li>If it’s a Journal (Blog) Entry, we’ll assume that it’s unlikely to change often so we’ll put performance ahead of freshness and get it from the device’s cache. In the background we asynchronously (i.e. not affecting page load time) fetch a fresh version from the network to update the cache for subsequent requests. If our page is not already in the cache we fetch it the old-fashioned way over the internet, show it and put it in the cache. If there’s no internet connection the show still goes on - we display our <em>offline fallback</em> page.</li>
	<li>For an important <em>non-blog</em> page (homepage, section indexes etc), since it is more likely to change regularly we fetch it from the network and store a copy in the cache. If there’s no internet connection, get it from the cache. And if it doesn’t exist in the cache, show our <em>offline fallback</em> page.</li>
	</ul>
</li>
<li>When an image is requested, look in the device’s cache first. Only if it’s not already there do we fetch it from the network. And if there’s no internet connection, show a <em>fallback image</em>.</li>
<li>For everything else (CSS, Javascript, other media), look for a cached copy first, and only if that doesn’t exist do we go to the network.</li>
</ul>

<h3>The Offline Fallback page</h3>
<p>Our website is already more resilient website than it was previously because locally cached pages can be shown even when the reader has no internet connection. However our <em>offline fallback page</em> adds further resilience, by ensuring that when the visitor with no internet connection navigates to a page which has not already been cached, they will see something infinitely more useful than the typical error message. Our fallback page gives them a friendly message telling them that we’ve detected that they are offline, but not to worry – here’s a list of links to (cached) pages that they can browse while offline.</p>

<h2>Pieces of a PWA</h2>
<p>We’ve <a href="https://www.greenhilldigital.com/services/progressive-web-apps">written in detail about PWAs elsewhere</a> but to recap, Progressive Web Apps allow us to build enhanced web experiences that previously required a native application. The technical building blocks of a PWA are:
<ul>
<li>HTTPS (which we already had);</li>
<li>a service worker; and</li>
<li>a manifest.</li>
<ul>

<h3>Our website is now installable</h3>
<p>Thanks to our <em>manifest</em>, our website can now be <em>installed</em> to a person’s phone or tablet home screen without any “app store” involvement. Browsers such as Chrome identify <a rel="me" href="https://www.greenhill.com/">www.greenhill.com</a> as a PWA and will prompt the user to install it to their home screen. And achieving this preferential positioning on a person’s phone <a href="https://developers.google.com/web/showcase/2017/twitter">leads to significant increases in re-engagement, as confirmed by Twitter</a>.

<h2>Next Steps</h2>
<p>Next up, we plan to implement web push notifications so that visitors can subscribe to be notified when a new blog post is published. We’ll write about that in a future article.</p>

<p>In the meantime, if the performance and resilience gains afforded by a PWA sound interesting to you, why not <a href="https://www.greenhilldigital.com/contact/">get in touch</a> and let’s talk it over.</p>

<aside>
<h2>Acknowledgements</h2>
<ul>
<li><a href="https://abookapart.com/products/going-offline">Going Offline</a> by Jeremy Keith is a fantastic book which has helped us a lot on our journey with service workers and PWAs.</li>
<li><a href="https://www.greenhilldigital.com/journal/an-event-apart-designing-progressive-web-apps">Jason Grigsby's talk at An Event Apart Chicago</a> was also a great inspiration and his forthcoming book <a href="https://abookapart.com/products/progressive-web-apps">Progressive Web Apps</a> is sure to be worth checking.</li>
</ul>
</aside>
    </div>

    <p>Tagged with:<br /> <a href="/journal/archive/tag/offline" rel="tag">offline</a>, <a href="/journal/archive/tag/pwa" rel="tag">PWA</a>, <a href="/journal/archive/tag/https" rel="tag">https</a>, <a href="/journal/archive/tag/serviceworker" rel="tag">serviceworker</a>, <a href="/journal/archive/tag/performance" rel="tag">performance</a></p>

</article>




</main>

<div id="contact-prompt">
<div id="contact-prompt-inner">

<figure>
    <img src="/console/resources/liamcentred-2-w400.jpg" alt="A photo of Liam Nugent, CEO" />
    <figcaption>Talk to Liam</figcaption>
</figure>

<div id="contact-prompt-body">
    <h2>Let’s talk</h2>
    <p>Looking for a brand new app or website? Or want to improve your existing system?</p>
    <p>Let’s talk about it. Contact Liam on <a class="tel" href="tel:+441413327051">+44 (0)141 332 7051</a> or <a href="mailto:info@greenhilldigital.com">info@greenhilldigital.com</a> for a no-obligation chat and we'll take it from there.</p>
</div>

</div> <!-- / #contact-prompt-inner -->
</div> <!-- / #contact-prompt -->

<footer role="contentinfo">

<!-- <ul id="footer-internal-links">
    <li><a href="/contact/">Contact</a></li>
    <li><a href="/careers/">Careers</a></li>
</ul> -->

<small class="legal copyright-notice">&copy; 2014 - 2022 Greenhill</small>
<small class="legal">Registered in Scotland</small>
<small class="legal">Company Number SC475563</small>

<!-- <h3>Find us on:</h3> -->
<ul id="social-links">
    <li id="social-link-linkedin"><a href="https://www.linkedin.com/company/10542569/" rel="me">LinkedIn</a></li>
    <li id="social-link-instagram"><a href="https://www.instagram.com/greenhill01/" rel="me">Instagram</a></li>
    <li id="social-link-medium"><a href="https://medium.com/@greenhill01" rel="me">Medium</a></li>
</ul>

</footer>


<script src="https://cdn.polyfill.io/v2/polyfill.min.js"></script>
<script src="/js/plugins.js"></script>
<script src="/js/main_v4.js"></script>

<script>
if (navigator.serviceWorker) {
	navigator.serviceWorker.register('/serviceworker.js');
    window.addEventListener('load', function() {
        if (navigator.serviceWorker.controller) {
            navigator.serviceWorker.controller.postMessage({'command': 'clean up caches'});
        }
    });
}
</script>



<script>
    UA.then(function(sdk) {
        console.log('UA success');

        // First check if user is already opted in, in which case stop here.
        if (sdk.channel && sdk.channel.optedIn) {
            console.log('Already opted in to web push notifications');
        } else {
            console.log('Not yet opted in to web push notifications');
        
            var elMain = document.querySelector("main");

            var divPushNotificationsPrompt = document.createElement("div");
            divPushNotificationsPrompt.setAttribute("id", "push-notifications-prompt");

            var pnpHeading = document.createElement("h3");
            pnpHeading.innerHTML = "Hear about new articles first";

            var pnpIntro = document.createElement("p");
            pnpIntro.innerHTML = "We use <em>web push notifications</em> to let our subscribers know when we’ve published a new journal entry. Give it a try!";

            var btnWebPushRegister = document.createElement("button");
            btnWebPushRegister.setAttribute("id", "register");
            btnWebPushRegister.innerHTML = "Notify me of new articles";
            
            divPushNotificationsPrompt.appendChild(pnpHeading);
            divPushNotificationsPrompt.appendChild(pnpIntro);
            divPushNotificationsPrompt.appendChild(btnWebPushRegister);
            elMain.appendChild(divPushNotificationsPrompt);

            document.getElementById('register').addEventListener('click', function() {
                sdk.register().then(function(response) {
                    console.log(response);

                    var thanks = document.createElement("p");
                    thanks.innerHTML = "<b>Thanks</b> – you’re now subscribed.";
                    divPushNotificationsPrompt.removeChild(btnWebPushRegister);
                    divPushNotificationsPrompt.appendChild(thanks);

                }).catch(function(error) {
                    console.log(error);
                });
            });
        }
    }).catch(function(err) {
        console.log('UA fail');
        console.log(err)
    })
</script>

</body>
</html>
